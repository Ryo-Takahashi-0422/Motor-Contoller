\# Motor-Contoller

&nbsp; 

\# 現在制作中のファームウェアポートフォリオです。

以下はシステム概要です。  

・スマホアプリ(Motor Contoller Helper) とマイコンをBluetooth(HC-05)でハンドシェイクして、相互通信可能とします。通信方式はUARTです。  

・マイコンはEEPROM(24LC64)、Bluetoothモジュール(HC-05)、モータードライバ(L298N)と接続しています。  

・モータドライバ(L298N)はDCギアモータ(25GA370)と接続しています。  

&nbsp; 

\# 2025/12/4時点

\# 実装済の主な機能：

・アプリとマイコンのハンドシェイク、UARTによる相互通信  

・スマホからの通信コマンド(アプリからコマンド名を表す文字列およびEEPROMのアドレスのセット。デリミタは"\\r\\n"を使用)の送信機能  

・マイコン側での通信コマンド受付機能(関数ポインタを利用して、コマンドリストから検索、コマンドがヒットすればその関数に割り当てられた処理を実行)  

・マイコンとEEPROMとの間でのiic通信および、データの読み書き  

・スマホアプリ上のスライドバー(0~100の整数)を調整して送信ボタンを押下することで、UART通信によりマイコン側で値を受け取ります。  

その値を係数としてデューティ比(min0, max100)を算出し、MTUの該当レジスタに書き込むことでモータのPWM制御を行います。  

&nbsp; 

\# 今後実装予定の機能

1\.スマホアプリ上で、マイコンから受け取った情報に基づく波形作成  

　例えば、モータの速度制御については10msec間隔で100回サンプリングしつつrpmに変換→まとめてアプリへ送信→アプリ側で波形作成  

2.PIDモデル(オシロスコープ購入済、同定作業は1.と平行して予定しております)  

3.PIDモデルに基づくモータの速度制御および位置制御  

4\.スマホ側でPID値を入力して、マイコンの各係数に反映させる  

